# -*-coding:utf-8-*-

from sklearn import linear_model
import numpy as np

def test():
    u = [936537, 548321, 456039, 252739, 193994, 153029, 236212, 216506, 152563, 168211, 193579, 136214, 164434, 161899, 115082, 159306, 137950, 122364, 102310, 77201, 134306, 123708, 37494, 94301, 82686, 45159, 76340, 66997, 62055, 66515, 67978, 64074, 60940, 65512, 50641, 51115, 53089, 41750, 41196, 41583, 42487, 37542, 50420, 43744, 41887, 17496, 43736, 41594, 38860, 36501, 41033, 46091, 30389, 31478, 39641, 33422, 34617, 28113, 31749, 28873, 26933, 23978, 24321, 30160, 23200, 28553, 25525, 22226, 19408, 21586, 18659, 19379, 19108, 19828, 16159, 17372, 15379, 19356, 16994, 17385, 18576, 17437, 15292, 16661, 18287, 17362, 15392, 13747, 17752, 14088, 13313, 15008, 14111, 15329, 10932, 13311, 10358, 12074, 12114, 11693, 11309, 10314, 11142, 9518, 10773, 8685, 9741, 9147, 9530, 7942, 8782, 7445, 9647, 8410, 8216, 8388, 6831, 7747, 7627, 7168, 7019, 6718, 6519, 6381, 6375, 5878, 5594, 5381, 5947, 5165, 4218, 3268, 4841, 4663, 4269, 4151, 4221, 3743, 4227, 4010, 3883, 3847, 4290, 3446, 3827, 3534, 3315, 3337, 2838, 2462, 3238, 2458, 2708, 2794, 2821, 2559, 2359, 2519, 1968, 1906, 2102, 2126, 1997, 2048, 1426, 1560, 1426, 1133, 1419, 1105, 766, 686]
    w = [1543900, 962787, 739055, 377067, 375646, 363457, 319243, 278981, 259122, 247615, 246344, 240548, 237836, 208348, 199352, 197670, 193365, 185608, 185067, 175290, 173124, 156205, 134949, 122122, 108992, 108579, 103399, 102402, 98475, 94210, 92428, 91247, 83126, 80989, 79085, 77174, 74851, 70931, 69862, 66471, 66102, 65557, 64034, 63908, 61389, 58486, 57109, 56673, 55793, 53033, 53018, 50738, 48372, 46209, 46181, 44697, 43432, 43013, 41622, 41562, 41488, 38348, 38092, 37783, 35300, 34929, 33682, 32929, 31843, 30442, 30391, 29813, 29470, 28142, 26242, 25605, 25315, 25002, 24713, 24057, 23498, 22842, 22718, 22158, 22008, 21418, 21307, 20783, 20493, 20304, 19437, 19350, 18968, 18956, 17659, 17279, 16558, 16324, 16305, 16302, 16234, 15844, 14191, 13832, 13706, 13138, 12915, 12717, 12443, 12391, 12066, 11391, 11234, 10512, 10496, 10440, 10303, 10165, 9913, 9642, 9363, 8905, 8766, 8392, 8388, 8274, 8274, 7654, 7522, 7210, 7027, 6669, 6328, 6255, 5727, 5658, 5475, 5418, 5312, 5302, 5123, 5121, 5066, 4956, 4656, 4612, 4464, 4392, 4212, 4040, 4037, 3741, 3718, 3546, 3460, 3456, 3131, 3056, 2986, 2923, 2903, 2842, 2726, 2644, 2007, 1827, 1750, 1561, 1533, 1461, 949, 863]

    us = []
    ul = []
    ws = []
    wl = []
    un = []
    wn = []


    for i in range(len(w)):
        if w[i] <= 8000:
            us.append(u[i])
            ws.append([w[i]])
        else:
            ul.append(u[i])
            wl.append([w[i]])
    print  'us: ', us
    print 'ws: ', ws
    print  'un: ', un
    print 'wn: ', wn
    print 'ul: ', ul
    print 'wl: ', wl

    model_s = linear_model.LinearRegression()
    model_l = linear_model.LinearRegression()
    model_s.fit(ws, us)
    model_l.fit(wl, ul)


    count = 0
    for i in ws:
        i = i[0]
        tm = model_s.coef_*i +model_s.intercept_
        print tm, i
        if tm >= 0.7*i and tm <= 1.3*i:
            count += 1
    for i in wl:
        i = i[0]
        tm = model_l.coef_*i + model_l.intercept_
        print tm, i
        if tm >= 0.7*i and tm <= 1.3*i:
            count += 1
    print count
    print model_s.coef_, model_s.intercept_
    print model_l.coef_, model_l.intercept_

def function_user2weibo(weibo):
    para_s = [ 0.68754675, 190.922760225]
    para_l = [ 0.60115315, 4206.60934548]

    if int(weibo) <= 8000:
        user = int(para_s[0]*int(weibo)+para_s[1])
    else:
        user = int(para_l[0]*int(weibo)+para_l[1])

    return user


if __name__ == "__main__":
    print function_user2weibo(4000)
